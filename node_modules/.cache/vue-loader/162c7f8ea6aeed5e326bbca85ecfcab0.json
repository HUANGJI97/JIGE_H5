{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/addCard/addCard.vue?vue&type=style&index=0&id=90c27e5e&scoped=true&lang=css&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/addCard/addCard.vue","mtime":1562206625257},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/css-loader/index.js","mtime":1429891385000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.footer{\n    width: 70vw;\n    position: absolute;\n    left: 0px;\n    right: 0px;\n    bottom: 40px;\n    margin: 0 auto;\n    /*bottom: 0px;*/\n    /*left: 0px;*/\n    /*right: 0px;*/\n}\n",{"version":3,"sources":["addCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addCard.vue","sourceRoot":"src/pages/addCard","sourcesContent":["<template>\n   <view>\n       <cu-custom class=\"\" :isBack=\"true\">\n           <block slot=\"content\">添加卡片</block>\n       </cu-custom>\n       <view class=\"cu-card\">\n           <view class=\"cu-form-group\">\n               <view class='title'>卡号</view>\n               <input placeholder=\"请输入卡号\" v-model=\"cardno\"  type=\"number\" class='radius' name='input' @input=\"handleCardnoCahnge\"></input>\n               <text class='cuIcon-card text-gray'></text>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>学校</view>\n               <input placeholder=\"请输入卡号自动识别\" v-model=\"school\" class='radius' disabled=\"disabled\" name='input'></input>\n               <text class='cuIcon-group_fill text-gray'></text>\n           </view>\n       </view>\n       <button class='cu-btn block bg-green lg  margin-top-xl cuIcon-add'  @click=\"handleSubmit\" :disabled=\"submiting\" :loading=\"submiting\"  >绑定</button>\n   </view>\n</template>\n\n<script>\n    import {addCard, getSchoolNameByCard} from \"../../api/card\";\n  import {delay} from \"../../utils/utils\";\n\n    export default {\n        name: \"addCard\",\n        data(){\n            return{\n                submiting:false,\n                cardno:'',\n                school:'',\n            }\n        },\n        methods:{\n            async handleSubmit(){\n                console.log(`调试:当前卡号`,this.cardno);\n                if(this.school && this.school !== ''){\n                    this.submiting = true;\n                    let result = await  addCard({cardno:this.cardno}).catch(err=>{\n                        uni.hideLoading();\n                        uni.showToast({title:'添加失败'})\n                        console.log(`调试:添加失败`, err)\n                    });\n                    this.submiting = false;\n                    uni.showToast({\n                        title:'绑定成功'\n                    })\n                    await  delay(1000);\n                    console.log(`调试:绑定成功`, this.result)\n                    uni.navigateBack(-1);\n                }else{\n                    uni.showToast({\n                        title:'卡号不正确',\n                        icon:'none'\n                    })\n                }\n            },\n            async handleCardnoCahnge(){\n                console.log(`调试:当前卡号`,this.cardno,this.cardno.length);\n                if(this.cardno.length === 10){\n                   this.school =  await  getSchoolNameByCard({cardno:this.cardno}).catch(res=>{\n                       this.school =''\n                   })\n                    console.log(`调试:获取到的校名`, this.school)\n                }else{\n                    this.school = ''\n                }\n\n            }\n        }\n    }\n</script>\n\n<style scoped scoped>\n    .footer{\n        width: 70vw;\n        position: absolute;\n        left: 0px;\n        right: 0px;\n        bottom: 40px;\n        margin: 0 auto;\n        /*bottom: 0px;*/\n        /*left: 0px;*/\n        /*right: 0px;*/\n    }\n</style>\n"]}]}