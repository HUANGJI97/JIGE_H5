{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/login/login.vue?vue&type=style&index=0&id=385d1be5&scoped=true&lang=css&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/login/login.vue","mtime":1562574638492},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/css-loader/index.js","mtime":1429891385000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.bg-milk {\n    background-image: url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/bg-image-milk3.jpg\");\n    /*background-image:url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/bg-milk.jpg\") ;*/\n    /*background-image:url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/bg-image-milk.jpg\") ;*/\n    background-size: cover;\n    /*background-color: #f4f5f0;*/\n}\n\n.bg-cow {\n    background-image: url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/mow-huawen.jpeg\");\n    background-size: cover;\n    /*color: white;*/\n}\n\n.footer {\n    width: 70vw;\n    position: absolute;\n    left: 0px;\n    right: 0px;\n    bottom: 40px;\n    margin: 0 auto;\n    /*bottom: 0px;*/\n    /*left: 0px;*/\n    /*right: 0px;*/\n}\n\n/*https://deepand.oss-cn-shenzhen.aliyuncs.com/image/mow-huawen.jpeg*/\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"login.vue","sourceRoot":"src/pages/login","sourcesContent":["<template>\n    <view class=\"cu-page   \">\n        <img src=\"../../static/haibao.jpg\" style=\"height: 100%;width: 100%;\">\n    </view>\n\n</template>\n\n<script>\n    import {getAccessToken, getMobile, Login} from \"../../api/user\";\n    import { decodeParams } from \"../../utils/utils\"\n    import cache from \"../../utils/cache\";\n\n\n    export default {\n        name: \"login\",\n        data() {\n            return {\n                loading: false\n            }\n        },\n        async onLoad(){\n            let tokens = cache.get(\"tokens\");\n            let query = decodeParams(window.location.href);\n            let {token,code,state}  =query;\n\n\n            console.log(`调试:获取缓存`, tokens);\n\n            if(cache.get(\"X-Token\")){\n                if(token){\n                    cache.set(\"token\",token);\n                }\n                uni.reLaunch({\n                    url:'../user/user'\n                });\n                return 0;\n            }else if(code){\n                let res = await getAccessToken({code,token:state});\n                cache.set(\"token\",state);\n                uni.reLaunch({\n                    url:'../user/user'\n                });\n                console.log(`调试:获取`, res);\n                return 0;\n            }else if(token){\n                console.log(`调试不存在缓存正在调用登录:`);\n                Login({token});\n            }else{\n                console.log(`调试:啥都没有 程序结束`,query,tokens)\n            }\n\n            //\n            // if(code){\n            //\n            // }\n            // if(!query.token){\n            //     console.log(`调试:没有获取token程序结束`,query,window.location.href);\n            //     return\n            // }\n\n\n\n\n\n        },\n        methods: {\n            handleLogin() {\n                    // Login()\n                uni.reLaunch({\n                    url:'../index/index'\n                })\n            },\n            async handleGetMobile(res) {\n                let { detail } = res;\n                let {encryptedData,iv }= detail;\n                console.log(`调试:获取手机号调试`, encryptedData)\n                await  getMobile({encryptedData,iv });\n\n            },\n            async handelGetUserInfo(res) {\n                const { detail } = res;\n                const { userInfo,encryptedData,iv } = detail;\n                let token = await  Login();\n                this.loading = false\n                uni.redirectTo({\n                    url: '../index/index'\n                })\n\n            }\n        }\n    }\n</script>\n\n<style scoped scoped>\n    .bg-milk {\n        background-image: url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/bg-image-milk3.jpg\");\n        /*background-image:url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/bg-milk.jpg\") ;*/\n        /*background-image:url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/bg-image-milk.jpg\") ;*/\n        background-size: cover;\n        /*background-color: #f4f5f0;*/\n    }\n\n    .bg-cow {\n        background-image: url(\"https://deepand.oss-cn-shenzhen.aliyuncs.com/image/mow-huawen.jpeg\");\n        background-size: cover;\n        /*color: white;*/\n    }\n\n    .footer {\n        width: 70vw;\n        position: absolute;\n        left: 0px;\n        right: 0px;\n        bottom: 40px;\n        margin: 0 auto;\n        /*bottom: 0px;*/\n        /*left: 0px;*/\n        /*right: 0px;*/\n    }\n\n    /*https://deepand.oss-cn-shenzhen.aliyuncs.com/image/mow-huawen.jpeg*/\n</style>\n"]}]}