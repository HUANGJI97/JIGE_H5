{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/editCard/editCard.vue?vue&type=style&index=0&id=7ecc85ca&scoped=true&lang=css&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/editCard/editCard.vue","mtime":1562206494397},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/css-loader/index.js","mtime":1429891385000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.footer{\n    width: 80vw;\n    position: absolute;\n    left: 0px;\n    right: 0px;\n    bottom: 40px;\n    margin: 0 auto;\n    /*bottom: 0px;*/\n    /*left: 0px;*/\n    /*right: 0px;*/\n}\n",{"version":3,"sources":["editCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"editCard.vue","sourceRoot":"src/pages/editCard","sourcesContent":["<template>\n   <view>\n       <cu-custom class=\"\" :isBack=\"true\">\n           <block slot=\"content\">卡操作</block>\n       </cu-custom>\n       <view class=\"cu-card\">\n           <view class=\"cu-form-group\">\n               <view class='title'>当前卡卡号</view>\n               <input placeholder=\"输入限购金额\" type=\"number\" disabled v-model=\"cardInfo.cardno\" class='radius ' name='input'></input>\n               <button class=\"cu-btn sm  round bg-green shadow text-sm icon-uploa\"  @tap=\"handleRplaceCard\">我要换卡</button>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>当前卡状态</view>\n               <input  class='radius text-green' disabled=\"disabled\"  :value=\"cardInfo.cardstatus\" name='input'></input>\n               <button class=\"cu-btn  sm round bg-green shadow text-sm icon-uploa\"  :disabled=\"cardInfo.cardstatus != '正常'\" @tap=\"handleLossCard\">{{cardInfo.cardstatus == '正常' ? '我要挂失':cardInfo.cardstatus}}</button>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>日限购金额</view>\n               <input placeholder=\"输入限购金额\" type=\"number\" v-model=\"cardInfo.daylimitmoney\" class='radius ' name='input'></input>\n               <text class='cuIcon-moneybagfill text-red'></text>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>日限购次数</view>\n               <input placeholder=\"输入限购次数\" type=\"number\" v-model=\"cardInfo.daylimitcount\" class='radius'  name='input'></input>\n               <text class='cuIcon-usefullfill text-orange'></text>\n           </view>\n\n       </view>\n<!--       <view class=\"flex bg-white text-center padding\">-->\n<!--           <view class=\"flex-sub\">-->\n<!--               <button class=\"cu-btn  bg-green shadow text-sm icon-uploa\" @tap=\"handleLossCard\">我要挂失</button>-->\n<!--           </view>-->\n<!--           <view class=\"flex-sub\">-->\n<!--               <button class=\"cu-btn  bg-green shadow text-sm icon-uploa\" @tap=\"handleRplaceCard\">我要换卡</button>-->\n<!--           </view>-->\n<!--       </view>-->\n       <button class='cu-btn block bg-green lg margin-top-xl    cuIcon-file'  :disabled=\"submiting\" :loading=\"submiting\" @click=\"handleSubmitCardEdit\"  >保存</button>\n   </view>\n</template>\n\n<script>\n    import {reportLossCard, setCardLimit} from \"../../api/card\";\n   import {delay,comfirm} from \"../../utils/utils\";\n   import cache from \"../../utils/cache\";\n\n    export default {\n        name: \"editCard\",\n        data(){\n            return {\n                cardInfo:{},\n                colorMap : { '正常':'bg-green','已挂失':'bg-orange','冻结':'bg-red'},\n                submiting:false\n            }\n        },\n        onLoad(options) {\n            console.log(`调试:获取到参数`, options);\n            this.cardInfo =  options\n        },\n        methods:{\n            async handleSubmitCardEdit(){\n                this.submiting = true;\n                let res =await setCardLimit(this.cardInfo);\n                this.submiting = false;\n                uni.showToast({\n                    title:'保存成功',\n                });\n                await  delay(1000);\n                uni.navigateBack(-1);\n                console.log(`调试:`, res)\n            },\n            handleRplaceCard(){\n               uni.showModal({\n                    title:'换卡',\n                    content:'请联系客服',\n\n               })\n            },\n            async handleLossCard({openid, cardno}){\n              let comf = await  comfirm({\n                    title:\"挂失卡片\",\n                    content:`卡片挂失后将暂停使用 是否确认挂失卡(${this.cardInfo.cardname})[${this.cardInfo['cardno']}]`\n               })\n               if(comf){\n                   let oepnid =  cache.get(\"token\");\n                   uni.showLoading({title:\"挂失中...\"});\n\n                   let reuslt = await  reportLossCard({openid, cardno:this.cardInfo.cardno})\n                   uni.hideLoading();\n                   uni.showToast({\n                       title:'成功'\n                   })\n                   this.cardInfo.cardstatus = \"已挂失\"\n               }\n            }\n\n        }\n    }\n</script>\n\n<style scoped scoped>\n    .footer{\n        width: 80vw;\n        position: absolute;\n        left: 0px;\n        right: 0px;\n        bottom: 40px;\n        margin: 0 auto;\n        /*bottom: 0px;*/\n        /*left: 0px;*/\n        /*right: 0px;*/\n    }\n</style>\n"]}]}