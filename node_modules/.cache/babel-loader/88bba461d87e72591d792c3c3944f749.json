{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-3!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/recharge/recharge.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/recharge/recharge.vue","mtime":1568285594777},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@babel/runtime/regenerator\"));\n\nvar _orders = require(\"../../api/orders\");\n\nvar _utils = require(\"../../utils/utils\");\n\nvar _cache = _interopRequireDefault(require(\"../../utils/cache\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar _default = {\n  name: \"recharge\",\n  data: function data() {\n    return {\n      cardInfo: {},\n      recharge: {},\n      userInfo: _cache.default.get(\"userInfo\")\n    };\n  },\n  onLoad: function () {\n    var _onLoad = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(options) {\n      var i;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.cardInfo = options;\n              console.log(\"\\u8C03\\u8BD5:\\u63A5\\u6536\\u5230\\u53C2\\u6570\", options);\n              _context.next = 4;\n              return (0, _orders.getRechargeList)();\n\n            case 4:\n              this.recharge = _context.sent;\n              this.recharge.list = [];\n\n              for (i = 0; i < this.recharge.items.length; i += 2) {\n                this.recharge.list.push(this.recharge.items.slice(i, i + 2));\n              }\n\n              console.log(\"\\u8C03\\u8BD5:recharge\", this.recharge);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function onLoad(_x) {\n      return _onLoad.apply(this, arguments);\n    }\n\n    return onLoad;\n  }(),\n  methods: {\n    handleBack: function () {\n      var _handleBack = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                uni.navigateBack(-1);\n                uni.reLaunch({\n                  url: '../user/user'\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function handleBack() {\n        return _handleBack.apply(this, arguments);\n      }\n\n      return handleBack;\n    }(),\n    handleRecharge: function () {\n      var _handleRecharge = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee3(item) {\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(\"\\u8C03\\u8BD5:\\u4F60\\u9009\\u62E9\\u4E86\\u5145\\u503C\\u5957\\u9910\", item);\n                _context3.next = 3;\n                return (0, _orders.pay)({\n                  repid: item.id\n                });\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleRecharge(_x2) {\n        return _handleRecharge.apply(this, arguments);\n      }\n\n      return handleRecharge;\n    }(),\n    handleChoose: function () {\n      var _handleChoose = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee4(e) {\n        var rechargeyuan, result, outtradeno;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                rechargeyuan = e.rechargeyuan;\n                _context4.next = 3;\n                return (0, _orders.createAndPaymentOrder)({\n                  price: rechargeyuan,\n                  cardno: this.cardInfo.cardno\n                });\n\n              case 3:\n                result = _context4.sent;\n                outtradeno = result.outtradeno;\n                console.log(\"\\u8C03\\u8BD5:\\u652F\\u4ED8\\u7ED3\\u679C\", result);\n                (0, _utils.navigateTo)({\n                  url: '../waitResult/waitResult',\n                  params: _objectSpread({\n                    outtradeno: outtradeno\n                  }, this.cardInfo)\n                });\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function handleChoose(_x3) {\n        return _handleChoose.apply(this, arguments);\n      }\n\n      return handleChoose;\n    }()\n  }\n};\nexports.default = _default;",{"version":3,"sources":["recharge.vue"],"names":[],"mappings":";;;;;;;;;AA8CA;;AACA;;AACA;;;;;;;;;;;;eAEA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,eAAA,GAAA,CAAA,UAAA;AAHA,KAAA;AAMA,GATA;AAUA,EAAA,MAVA;AAAA;AAAA;AAAA,+CAUA,OAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA,mBAAA,QAAA,GAAA,OAAA;AACA,cAAA,OAAA,CAAA,GAAA,gDAAA,OAAA;AAZA;AAAA,qBAaA,8BAbA;;AAAA;AAaA,mBAAA,QAbA;AAcA,mBAAA,QAAA,CAAA,IAAA,GAAA,EAAA;;AACA,mBAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,MAAA,EAAA,CAAA,IAAA,CAAA,EAAA;AACA,qBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,QAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,CAAA;AACA;;AACA,cAAA,OAAA,CAAA,GAAA,0BAAA,KAAA,QAAA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,GAAA,CAAA,YAAA,CAAA,CAAA,CAAA;AACA,gBAAA,GAAA,CAAA,QAAA,CAAA;AACA,kBAAA,GAAA,EAAA;AADA,iBAAA;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAOA,IAAA,cAPA;AAAA;AAAA;AAAA,kDAOA,IAPA;AAAA;AAAA;AAAA;AAAA;AAQA,gBAAA,OAAA,CAAA,GAAA,kEAAA,IAAA;AARA;AAAA,uBASA,iBAAA;AAAA,kBAAA,KAAA,EAAA,IAAA,CAAA;AAAA,iBAAA,CATA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAYA,IAAA,YAZA;AAAA;AAAA;AAAA,kDAYA,CAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,gBAAA,YAbA,GAaA,CAbA,CAaA,YAbA;AAAA;AAAA,uBAeA,mCAAA;AACA,kBAAA,KAAA,EAAA,YADA;AAEA,kBAAA,MAAA,EAAA,KAAA,QAAA,CAAA;AAFA,iBAAA,CAfA;;AAAA;AAeA,gBAAA,MAfA;AAmBA,gBAAA,UAnBA,GAmBA,MAnBA,CAmBA,UAnBA;AAoBA,gBAAA,OAAA,CAAA,GAAA,0CAAA,MAAA;AACA,uCAAA;AACA,kBAAA,GAAA,EAAA,0BADA;AAEA,kBAAA,MAAA;AACA,oBAAA,UAAA,EAAA;AADA,qBAEA,KAAA,QAFA;AAFA,iBAAA;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AApBA,C","sourcesContent":["<template>\n    <view class=\"bg-white \" style=\"height: 100vh;\">\n        <view class=\"bg-blue  flex justify-between padding-xl padding-right-0\" style=\"overflow:hidden;background-image: url(https://lft-ad.oss-cn-hangzhou.aliyuncs.com/eleme/png/bg-recharge-head.png);background-size: cover;\">\n            <view class=\"space bg-black\">\n                <view class=\"star \"></view>\n                <view class=\"star pink \"></view>\n                <view class=\"star blue \"></view>\n                <view class=\"star yellow \"></view>\n            </view>\n            <view>\n                <view class=\"text-sm\">当前粮票</view>\n               <view class=\"flex align-end\">\n                   <view class=\"bg-cash-sm margin-bottom-xs\"> </view>\n                   <view class=\"text-xxl margin-left-sm text-bold\" style=\"font-size: 50rpx;\">{{userInfo.times}}</view>\n               </view>\n            </view>\n            <view class=\"flex align-center\">\n                <view class=\"bg-white  padding-xs text-sm\" style=\"border-top-left-radius: 30px;border-bottom-left-radius: 30px;\" @click=\"handleBack\" >\n                    <text class=\"cuIcon-back margin-right-xs margin-left-xs\" style=\"\" ></text>\n                    返回首页\n                </view>\n            </view>\n        </view>\n        <view class=\"padding  margin-top\">\n            <view>请选择优惠套餐</view>\n            <view class=\"flex justify-between  margin-sm margin-top-xl\" v-for=\"(item,index) in recharge.list\"  :key=\"index\" >\n                <view :style=\"'background-image:url('+item2.bg+');background-size: 100% 100%;' + (item2.color ? 'border-color:'+ item2.color + ';' : '') \" v-for=\"(item2,index) in item\" :key=\"index\" class=\"flex-sub border-3px bg-white-milk   padding-top-sm padding-bottom-sm  radius-xxxl margin-right money-item\" hover-class=\"money-item-choose\" @click=\"handleRecharge(item2)\">\n                    <view class=\"flex justify-center align-end\">\n                        <view class=\"text-shadow text-money text-bold\">{{item2.coin}}</view>\n                        <view class=\"text-black text-md margin-bottom-xs margin-left-xs\">粮票</view>\n                    </view>\n                    <view class=\"flex justify-center margin-top-xs\">\n                        <view class=\"left-tag\">￥{{item2.pay_price}}</view>\n                        <view class=\"right-tag\" style=\"text-decoration: line-through;\"> 原价:{{item2.price!== '' ? item2.price : pay_price + 1}}</view>\n                    </view>\n                    <view class=\"my-badge \" >{{item2.name}}</view>\n                </view>\n\n\n\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\n    import {createAndPaymentOrder, createOrder, getRechargeList, pay} from \"../../api/orders\";\n    import {navigateTo} from \"../../utils/utils\";\n    import cache from \"../../utils/cache\";\n\n    export default {\n        name: \"recharge\",\n        data(){\n            return{\n               cardInfo:{},\n               recharge:{},\n                userInfo:cache.get(\"userInfo\")\n\n            }\n        },\n        async onLoad(options) {\n            this.cardInfo =options;\n            console.log(`调试:接收到参数`, options);\n            this.recharge = await  getRechargeList();\n            this.recharge.list = [];\n            for(let i=0;i<this.recharge.items.length;i+=2){\n                this.recharge.list.push(this.recharge.items.slice(i,i+2))\n            }\n            console.log(`调试:recharge`,  this.recharge )\n        },\n        methods:{\n           async handleBack(){\n               uni.navigateBack(-1);\n               uni.reLaunch({\n                   url:'../user/user'\n               })\n           },\n            async handleRecharge(item){\n              console.log(`调试:你选择了充值套餐`, item);\n              await pay({repid:item.id});\n\n            },\n           async handleChoose(e){\n                let { rechargeyuan } = e;\n\n               let result = await createAndPaymentOrder({\n                    price:rechargeyuan,\n                    cardno:this.cardInfo.cardno\n                });\n               let { outtradeno  } = result;\n               console.log(`调试:支付结果`, result);\n               navigateTo({\n                   url:'../waitResult/waitResult',\n                   params:{\n                       outtradeno,\n                       ...this.cardInfo\n                   }\n               });\n\n\n\n\n            }\n        }\n    }\n</script>\n\n<style scoped scoped>\n    @import \"star.css\";\n    .bg-cash-sm{\n        background-image: url(\"../../static/cash_yellow.png\");\n        background-size: 100% 100%;\n        width: 60rpx;\n        height: 35rpx;\n        display: inline-block;\n    }\n    .text-shadow{\n        text-shadow: 2px 2px 1px #80808059;\n    }\n    .text-money{\n        color: #483000;\n        font-size:60rpx;\n    }\n    .left-tag{\n        background:#f8b500;\n        color: #916200;\n        font-size: 10px;\n        padding: 5rpx;\n\n        border-bottom-left-radius: 30px;\n        border-top-left-radius: 5px;\n        padding-left: 20rpx;\n        padding-right: 20rpx;\n        font-weight: bold;\n        margin-right:3rpx;\n    }\n    .right-tag{\n        background: #f8b500;\n        color: #916200;\n        font-size: 10px;\n        padding: 5rpx;\n        border-top-right-radius: 30px;\n        border-bottom-right-radius: 5px;\n        padding-left: 20rpx;\n        padding-right: 20rpx;\n        font-weight: bold;\n        overflow-x: hidden;\n        white-space: nowrap;\n        text-overflow:ellipsis;\n        width: 160rpx;\n    }\n    .border-3px{\n        border:2px solid #f7a600;\n    }\n    .money-item{\n        position: relative;\n        overflow: hidden;\n    }\n    .my-badge{\n        background: #f8b500;\n        padding-left: 15px;\n        padding-right: 10px;\n        color: white;\n        position: absolute;\n        border-bottom-left-radius: 30rpx;\n        font-size: 10px;\n        top: 0;\n        right: 0;\n    }\n    .money-item-choose{\n        background: rgba(250, 209, 24, 0.2);\n    }\n    .bg-white-milk{\n        background-color: rgb(248,246,231);\n        color: var(--darkGray);\n    }\n\n\n\n</style>\n"],"sourceRoot":"src/pages/recharge"}]}