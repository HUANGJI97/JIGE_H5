{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-3!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/waitResult/waitResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/waitResult/waitResult.vue","mtime":1562120126381},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@babel/runtime/regenerator\"));\n\nvar _orders = require(\"../../api/orders\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar _default = {\n  name: \"waitResult\",\n  data: function data() {\n    return {\n      cardno: '',\n      outtradeno: '',\n      images: '../../static/undraw_loading_frh4.png',\n      text: '请稍后...',\n      status: 0,\n      StatusBar: this.StatusBar,\n      CustomBar: this.CustomBar,\n      title: '等待充值结果...'\n    };\n  },\n  onLoad: function () {\n    var _onLoad = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee2(options) {\n      var _this = this;\n\n      var outtradeno, cardno, t;\n      return _regenerator.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"\\u8C03\\u8BD5:\\u63A5\\u6536\\u5230\\u53C2\\u6570\", options);\n              outtradeno = options.outtradeno, cardno = options.cardno;\n              this.cardno = cardno;\n\n              if (outtradeno) {\n                _context2.next = 5;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 5:\n              t = setInterval(\n              /*#__PURE__*/\n              _asyncToGenerator(\n              /*#__PURE__*/\n              _regenerator.default.mark(function _callee() {\n                var rechargeResult;\n                return _regenerator.default.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return (0, _orders.checkRechargeReuslt)({\n                          outtradeno: outtradeno\n                        });\n\n                      case 2:\n                        rechargeResult = _context.sent;\n                        _this.images = '../../static/pay_success2.png';\n                        _this.text = \"充值成功\";\n                        _this.title = '充值成功';\n                        _this.status = 1;\n                        clearInterval(t);\n                        console.log(\"\\u8C03\\u8BD5:\\u68C0\\u67E5\\u5145\\u503C\\u8FD4\\u56DE\", rechargeResult);\n\n                      case 9:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), 1000);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function onLoad(_x) {\n      return _onLoad.apply(this, arguments);\n    }\n\n    return onLoad;\n  }(),\n  methods: {\n    handleToRechargeRecord: function handleToRechargeRecord() {\n      uni.navigateTo({\n        url: '../rechargeRecord/rechargeRecord?cardno=' + this.cardno\n      });\n    },\n    handleToHome: function handleToHome() {\n      uni.redirectTo({\n        url: '../index/index'\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["waitResult.vue"],"names":[],"mappings":";;;;;;;;;AAmBA;;;;;;;;eAEA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,sCAHA;AAIA,MAAA,IAAA,EAAA,QAJA;AAKA,MAAA,MAAA,EAAA,CALA;AAMA,MAAA,SAAA,EAAA,KAAA,SANA;AAOA,MAAA,SAAA,EAAA,KAAA,SAPA;AAQA,MAAA,KAAA,EAAA;AARA,KAAA;AAUA,GAbA;AAcA,EAAA,MAdA;AAAA;AAAA;AAAA,gDAcA,OAdA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA,cAAA,OAAA,CAAA,GAAA,gDAAA,OAAA;AAEA,cAAA,UAjBA,GAiBA,OAjBA,CAiBA,UAjBA,EAiBA,MAjBA,GAiBA,OAjBA,CAiBA,MAjBA;AAkBA,mBAAA,MAAA,GAAA,MAAA;;AAlBA,kBAmBA,UAnBA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAoBA,cAAA,CApBA,GAoBA,WAAA;AAAA;AAAA;AAAA;AAAA,wCAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACA,iCAAA;AAAA,0BAAA,UAAA,EAAA;AAAA,yBAAA,CADA;;AAAA;AACA,wBAAA,cADA;AAEA,wBAAA,KAAA,CAAA,MAAA,GAAA,+BAAA;AACA,wBAAA,KAAA,CAAA,IAAA,GAAA,MAAA;AACA,wBAAA,KAAA,CAAA,KAAA,GAAA,MAAA;AACA,wBAAA,KAAA,CAAA,MAAA,GAAA,CAAA;AACA,wBAAA,aAAA,CAAA,CAAA,CAAA;AACA,wBAAA,OAAA,CAAA,GAAA,sDAAA,cAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAA,IAQA,IARA,CApBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,sBADA,oCACA;AACA,MAAA,GAAA,CAAA,UAAA,CAAA;AACA,QAAA,GAAA,EAAA,6CAAA,KAAA;AADA,OAAA;AAGA,KALA;AAMA,IAAA,YANA,0BAMA;AACA,MAAA,GAAA,CAAA,UAAA,CAAA;AACA,QAAA,GAAA,EAAA;AADA,OAAA;AAGA;AAVA;AA9BA,C","sourcesContent":["<template>\n  <view class=\"bg-white \" style=\"height: 100vh;\" >\n    <cu-custom class=\"\" :isBack=\"true\">\n      <block slot=\"content\">{{title}}</block>\n    </cu-custom>\n    <view class=\"text-center   flex align-center justify-center\" :style=\"`height: calc(100vh - ${CustomBar}px)`\">\n      <view>\n          <image :src=\"images\" style=\"\"/>\n          <view class=\"text-gray\">\n            <text class=\"margin-bottom\"> {{text}}</text>\n            <button v-if=\"status\" class=\"bg-green margin-top round\" @tap=\"handleToRechargeRecord\">查看充值记录</button>\n            <button v-if=\"status\" class=\"bg-gray margin-top round\" @tap=\"handleToHome\">返回首页</button>\n          </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\n    import {checkRechargeReuslt} from \"../../api/orders\";\n\n    export default {\n        name: \"waitResult\",\n        data(){\n            return {\n              cardno:'',\n              outtradeno:'',\n              images:'../../static/undraw_loading_frh4.png',\n              text:'请稍后...',\n              status:0,\n              StatusBar: this.StatusBar,\n              CustomBar: this.CustomBar,\n              title:'等待充值结果...'\n            }\n        },\n        async onLoad(options){\n            console.log(`调试:接收到参数`, options);\n\n           let { outtradeno,cardno } = options;\n           this.cardno = cardno;\n            if(!outtradeno) return;\n            let t = setInterval(async ()=>{\n                let rechargeResult = await checkRechargeReuslt({outtradeno});\n                this.images='../../static/pay_success2.png';\n                this.text=\"充值成功\";\n                this.title='充值成功';\n                this.status = 1;\n                clearInterval(t);\n                console.log(`调试:检查充值返回`, rechargeResult)\n            },1000)\n        },\n      methods:{\n        handleToRechargeRecord(){\n           uni.navigateTo({\n             url:'../rechargeRecord/rechargeRecord?cardno='+this.cardno\n           })\n        },\n        handleToHome(){\n          uni.redirectTo({\n            url:'../index/index'\n          })\n        }\n      }\n    }\n</script>\n\n<style scoped scoped>\n\n</style>\n"],"sourceRoot":"src/pages/waitResult"}]}