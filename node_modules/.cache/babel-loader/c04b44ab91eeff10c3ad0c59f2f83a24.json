{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-3!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/editCard/editCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/editCard/editCard.vue","mtime":1562206494397},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@babel/runtime/regenerator\"));\n\nvar _card = require(\"../../api/card\");\n\nvar _utils = require(\"../../utils/utils\");\n\nvar _cache = _interopRequireDefault(require(\"../../utils/cache\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar _default = {\n  name: \"editCard\",\n  data: function data() {\n    return {\n      cardInfo: {},\n      colorMap: {\n        '正常': 'bg-green',\n        '已挂失': 'bg-orange',\n        '冻结': 'bg-red'\n      },\n      submiting: false\n    };\n  },\n  onLoad: function onLoad(options) {\n    console.log(\"\\u8C03\\u8BD5:\\u83B7\\u53D6\\u5230\\u53C2\\u6570\", options);\n    this.cardInfo = options;\n  },\n  methods: {\n    handleSubmitCardEdit: function () {\n      var _handleSubmitCardEdit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee() {\n        var res;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.submiting = true;\n                _context.next = 3;\n                return (0, _card.setCardLimit)(this.cardInfo);\n\n              case 3:\n                res = _context.sent;\n                this.submiting = false;\n                uni.showToast({\n                  title: '保存成功'\n                });\n                _context.next = 8;\n                return (0, _utils.delay)(1000);\n\n              case 8:\n                uni.navigateBack(-1);\n                console.log(\"\\u8C03\\u8BD5:\", res);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleSubmitCardEdit() {\n        return _handleSubmitCardEdit.apply(this, arguments);\n      }\n\n      return handleSubmitCardEdit;\n    }(),\n    handleRplaceCard: function handleRplaceCard() {\n      uni.showModal({\n        title: '换卡',\n        content: '请联系客服'\n      });\n    },\n    handleLossCard: function () {\n      var _handleLossCard = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2(_ref) {\n        var openid, cardno, comf, oepnid, reuslt;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                openid = _ref.openid, cardno = _ref.cardno;\n                _context2.next = 3;\n                return (0, _utils.comfirm)({\n                  title: \"挂失卡片\",\n                  content: \"\\u5361\\u7247\\u6302\\u5931\\u540E\\u5C06\\u6682\\u505C\\u4F7F\\u7528 \\u662F\\u5426\\u786E\\u8BA4\\u6302\\u5931\\u5361(\".concat(this.cardInfo.cardname, \")[\").concat(this.cardInfo['cardno'], \"]\")\n                });\n\n              case 3:\n                comf = _context2.sent;\n\n                if (!comf) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                oepnid = _cache.default.get(\"token\");\n                uni.showLoading({\n                  title: \"挂失中...\"\n                });\n                _context2.next = 9;\n                return (0, _card.reportLossCard)({\n                  openid: openid,\n                  cardno: this.cardInfo.cardno\n                });\n\n              case 9:\n                reuslt = _context2.sent;\n                uni.hideLoading();\n                uni.showToast({\n                  title: '成功'\n                });\n                this.cardInfo.cardstatus = \"已挂失\";\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleLossCard(_x) {\n        return _handleLossCard.apply(this, arguments);\n      }\n\n      return handleLossCard;\n    }()\n  }\n};\nexports.default = _default;",{"version":3,"sources":["editCard.vue"],"names":[],"mappings":";;;;;;;;;AAyCA;;AACA;;AACA;;;;;;;;eAEA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAAA,cAAA,UAAA;AAAA,eAAA,WAAA;AAAA,cAAA;AAAA,OAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,MATA,kBASA,OATA,EASA;AACA,IAAA,OAAA,CAAA,GAAA,gDAAA,OAAA;AACA,SAAA,QAAA,GAAA,OAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,oBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,SAAA,GAAA,IAAA;AAFA;AAAA,uBAGA,wBAAA,KAAA,QAAA,CAHA;;AAAA;AAGA,gBAAA,GAHA;AAIA,qBAAA,SAAA,GAAA,KAAA;AACA,gBAAA,GAAA,CAAA,SAAA,CAAA;AACA,kBAAA,KAAA,EAAA;AADA,iBAAA;AALA;AAAA,uBAQA,kBAAA,IAAA,CARA;;AAAA;AASA,gBAAA,GAAA,CAAA,YAAA,CAAA,CAAA,CAAA;AACA,gBAAA,OAAA,CAAA,GAAA,kBAAA,GAAA;;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAYA,IAAA,gBAZA,8BAYA;AACA,MAAA,GAAA,CAAA,SAAA,CAAA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,OAAA,EAAA;AAFA,OAAA;AAKA,KAlBA;AAmBA,IAAA,cAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,gBAAA,MAnBA,QAmBA,MAnBA,EAmBA,MAnBA,QAmBA,MAnBA;AAAA;AAAA,uBAoBA,oBAAA;AACA,kBAAA,KAAA,EAAA,MADA;AAEA,kBAAA,OAAA,oHAAA,KAAA,QAAA,CAAA,QAAA,eAAA,KAAA,QAAA,CAAA,QAAA,CAAA;AAFA,iBAAA,CApBA;;AAAA;AAoBA,gBAAA,IApBA;;AAAA,qBAwBA,IAxBA;AAAA;AAAA;AAAA;;AAyBA,gBAAA,MAzBA,GAyBA,eAAA,GAAA,CAAA,OAAA,CAzBA;AA0BA,gBAAA,GAAA,CAAA,WAAA,CAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA;AA1BA;AAAA,uBA4BA,0BAAA;AAAA,kBAAA,MAAA,EAAA,MAAA;AAAA,kBAAA,MAAA,EAAA,KAAA,QAAA,CAAA;AAAA,iBAAA,CA5BA;;AAAA;AA4BA,gBAAA,MA5BA;AA6BA,gBAAA,GAAA,CAAA,WAAA;AACA,gBAAA,GAAA,CAAA,SAAA,CAAA;AACA,kBAAA,KAAA,EAAA;AADA,iBAAA;AAGA,qBAAA,QAAA,CAAA,UAAA,GAAA,KAAA;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAbA,C","sourcesContent":["<template>\n   <view>\n       <cu-custom class=\"\" :isBack=\"true\">\n           <block slot=\"content\">卡操作</block>\n       </cu-custom>\n       <view class=\"cu-card\">\n           <view class=\"cu-form-group\">\n               <view class='title'>当前卡卡号</view>\n               <input placeholder=\"输入限购金额\" type=\"number\" disabled v-model=\"cardInfo.cardno\" class='radius ' name='input'></input>\n               <button class=\"cu-btn sm  round bg-green shadow text-sm icon-uploa\"  @tap=\"handleRplaceCard\">我要换卡</button>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>当前卡状态</view>\n               <input  class='radius text-green' disabled=\"disabled\"  :value=\"cardInfo.cardstatus\" name='input'></input>\n               <button class=\"cu-btn  sm round bg-green shadow text-sm icon-uploa\"  :disabled=\"cardInfo.cardstatus != '正常'\" @tap=\"handleLossCard\">{{cardInfo.cardstatus == '正常' ? '我要挂失':cardInfo.cardstatus}}</button>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>日限购金额</view>\n               <input placeholder=\"输入限购金额\" type=\"number\" v-model=\"cardInfo.daylimitmoney\" class='radius ' name='input'></input>\n               <text class='cuIcon-moneybagfill text-red'></text>\n           </view>\n           <view class=\"cu-form-group\">\n               <view class='title'>日限购次数</view>\n               <input placeholder=\"输入限购次数\" type=\"number\" v-model=\"cardInfo.daylimitcount\" class='radius'  name='input'></input>\n               <text class='cuIcon-usefullfill text-orange'></text>\n           </view>\n\n       </view>\n<!--       <view class=\"flex bg-white text-center padding\">-->\n<!--           <view class=\"flex-sub\">-->\n<!--               <button class=\"cu-btn  bg-green shadow text-sm icon-uploa\" @tap=\"handleLossCard\">我要挂失</button>-->\n<!--           </view>-->\n<!--           <view class=\"flex-sub\">-->\n<!--               <button class=\"cu-btn  bg-green shadow text-sm icon-uploa\" @tap=\"handleRplaceCard\">我要换卡</button>-->\n<!--           </view>-->\n<!--       </view>-->\n       <button class='cu-btn block bg-green lg margin-top-xl    cuIcon-file'  :disabled=\"submiting\" :loading=\"submiting\" @click=\"handleSubmitCardEdit\"  >保存</button>\n   </view>\n</template>\n\n<script>\n    import {reportLossCard, setCardLimit} from \"../../api/card\";\n   import {delay,comfirm} from \"../../utils/utils\";\n   import cache from \"../../utils/cache\";\n\n    export default {\n        name: \"editCard\",\n        data(){\n            return {\n                cardInfo:{},\n                colorMap : { '正常':'bg-green','已挂失':'bg-orange','冻结':'bg-red'},\n                submiting:false\n            }\n        },\n        onLoad(options) {\n            console.log(`调试:获取到参数`, options);\n            this.cardInfo =  options\n        },\n        methods:{\n            async handleSubmitCardEdit(){\n                this.submiting = true;\n                let res =await setCardLimit(this.cardInfo);\n                this.submiting = false;\n                uni.showToast({\n                    title:'保存成功',\n                });\n                await  delay(1000);\n                uni.navigateBack(-1);\n                console.log(`调试:`, res)\n            },\n            handleRplaceCard(){\n               uni.showModal({\n                    title:'换卡',\n                    content:'请联系客服',\n\n               })\n            },\n            async handleLossCard({openid, cardno}){\n              let comf = await  comfirm({\n                    title:\"挂失卡片\",\n                    content:`卡片挂失后将暂停使用 是否确认挂失卡(${this.cardInfo.cardname})[${this.cardInfo['cardno']}]`\n               })\n               if(comf){\n                   let oepnid =  cache.get(\"token\");\n                   uni.showLoading({title:\"挂失中...\"});\n\n                   let reuslt = await  reportLossCard({openid, cardno:this.cardInfo.cardno})\n                   uni.hideLoading();\n                   uni.showToast({\n                       title:'成功'\n                   })\n                   this.cardInfo.cardstatus = \"已挂失\"\n               }\n            }\n\n        }\n    }\n</script>\n\n<style scoped scoped>\n    .footer{\n        width: 80vw;\n        position: absolute;\n        left: 0px;\n        right: 0px;\n        bottom: 40px;\n        margin: 0 auto;\n        /*bottom: 0px;*/\n        /*left: 0px;*/\n        /*right: 0px;*/\n    }\n</style>\n"],"sourceRoot":"src/pages/editCard"}]}