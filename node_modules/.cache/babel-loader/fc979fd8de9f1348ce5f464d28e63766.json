{"remainingRequest":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-2!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/rechargeRecord/rechargeRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/src/pages/rechargeRecord/rechargeRecord.vue","mtime":1568272858806},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lianfangti/Project/UNI-APP/JIGE/node_modules/@babel/runtime/regenerator\"));\n\nvar _orders = require(\"../../api/orders\");\n\nvar _status = _interopRequireDefault(require(\"../component/status\"));\n\nvar _utils = require(\"../../utils/utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar _default = {\n  name: \"rechargeRecord\",\n  components: {\n    Status: _status.default\n  },\n  data: function data() {\n    return {\n      list: [],\n      page: 1\n    };\n  },\n  onPullDownRefresh: function onPullDownRefresh() {\n    console.log(\"\\u8C03\\u8BD5:\\u89E6\\u53D1\\u4E0B\\u62C9\");\n    this.page = 1;\n    this.loadData();\n  },\n  onReachBottom: function onReachBottom() {\n    console.log(\"\\u8C03\\u8BD5:\\u89E6\\u53D1\\u89E6\\u5E95\");\n    this.loadData();\n  },\n  onLoad: function () {\n    var _onLoad = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(options) {\n      var cardno, rechargeRecord;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"\\u8C03\\u8BD5:\\u5145\\u503C\\u8BB0\\u5F55\\u9875\\u6536\\u5230\\u53C2\\u6570\", options);\n              cardno = options.cardno;\n              _context.next = 4;\n              return (0, _orders.getRechargeRecord)();\n\n            case 4:\n              rechargeRecord = _context.sent;\n              this.list = rechargeRecord.list;\n              this.list = this.list.map(function (item) {\n                item.pay_time = (0, _utils.dateFormat)(item.pay_time, 'yyyy-MM-dd hh:mm');\n                console.log(\"\\u8C03\\u8BD5:\", item.pay_time);\n                return item;\n              });\n              console.log(\"\\u8C03\\u8BD5:\\u5145\\u503C\\u8BB0\\u5F55\\u67E5\\u8BE2\\u7ED3\\u679C\", this.list);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function onLoad(_x) {\n      return _onLoad.apply(this, arguments);\n    }\n\n    return onLoad;\n  }(),\n  filters: {\n    DateFormat: function DateFormat(val) {\n      return (0, _utils.dateFormat)(new Date(val), \"yyyy-MM-dd hh:mm\");\n    }\n  },\n  methods: {\n    loadData: function () {\n      var _loadData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2() {\n        var _ref,\n            _ref$page,\n            page,\n            data,\n            _args2 = arguments;\n\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, _ref$page = _ref.page, page = _ref$page === void 0 ? 1 : _ref$page;\n                uni.showLoading({\n                  title: '加载中...'\n                });\n                _context2.next = 4;\n                return (0, _orders.getRechargeRecord)({\n                  page: this.page\n                });\n\n              case 4:\n                data = _context2.sent;\n                uni.hideLoading();\n\n                if (data.list.length) {\n                  if (this.page == 1) {\n                    this.list = data.list;\n                  } else {\n                    this.list = [].concat(_toConsumableArray(this.list), _toConsumableArray(data.list));\n                  }\n\n                  this.page = this.page + 1;\n                } else {\n                  uni.showToast({\n                    title: \"已经到底了\",\n                    icon: 'none'\n                  });\n                }\n\n                console.log(\"\\u8C03\\u8BD5:\\u4F7F\\u7528\\u8BB0\\u5F55\\u67E5\\u8BE2\\u7ED3\\u679C\", this.list);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadData() {\n        return _loadData.apply(this, arguments);\n      }\n\n      return loadData;\n    }()\n  }\n};\nexports.default = _default;",{"version":3,"sources":["rechargeRecord.vue"],"names":[],"mappings":";;;;;;;;;AA6BA;;AACA;;AACA;;;;;;;;;;;;;;;;eAEA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,MAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GARA;AASA,EAAA,iBATA,+BASA;AACA,IAAA,OAAA,CAAA,GAAA;AACA,SAAA,IAAA,GAAA,CAAA;AACA,SAAA,QAAA;AACA,GAbA;AAcA,EAAA,aAdA,2BAcA;AACA,IAAA,OAAA,CAAA,GAAA;AACA,SAAA,QAAA;AACA,GAjBA;AAkBA,EAAA,MAlBA;AAAA;AAAA;AAAA,+CAkBA,OAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,cAAA,OAAA,CAAA,GAAA,wEAAA,OAAA;AACA,cAAA,MApBA,GAoBA,OApBA,CAoBA,MApBA;AAAA;AAAA,qBAqBA,gCArBA;;AAAA;AAqBA,cAAA,cArBA;AAsBA,mBAAA,IAAA,GAAA,cAAA,CAAA,IAAA;AACA,mBAAA,IAAA,GAAA,KAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,CAAA,QAAA,GAAA,uBAAA,IAAA,CAAA,QAAA,EAAA,kBAAA,CAAA;AACA,gBAAA,OAAA,CAAA,GAAA,kBAAA,IAAA,CAAA,QAAA;AACA,uBAAA,IAAA;AACA,eAJA,CAAA;AAKA,cAAA,OAAA,CAAA,GAAA,kEAAA,KAAA,IAAA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,GADA,EACA;AACA,aAAA,uBAAA,IAAA,IAAA,CAAA,GAAA,CAAA,EAAA,kBAAA,CAAA;AACA;AAHA,GA9BA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kFACA,EADA,mBACA,IADA,EACA,IADA,0BACA,CADA;AAEA,gBAAA,GAAA,CAAA,WAAA,CAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA;AAFA;AAAA,uBAGA,+BAAA;AAAA,kBAAA,IAAA,EAAA,KAAA;AAAA,iBAAA,CAHA;;AAAA;AAGA,gBAAA,IAHA;AAIA,gBAAA,GAAA,CAAA,WAAA;;AACA,oBAAA,IAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,sBAAA,KAAA,IAAA,IAAA,CAAA,EAAA;AACA,yBAAA,IAAA,GAAA,IAAA,CAAA,IAAA;AACA,mBAFA,MAEA;AACA,yBAAA,IAAA,gCAAA,KAAA,IAAA,sBAAA,IAAA,CAAA,IAAA;AAEA;;AACA,uBAAA,IAAA,GAAA,KAAA,IAAA,GAAA,CAAA;AAIA,iBAXA,MAWA;AACA,kBAAA,GAAA,CAAA,SAAA,CAAA;AACA,oBAAA,KAAA,EAAA,OADA;AAEA,oBAAA,IAAA,EAAA;AAFA,mBAAA;AAIA;;AAEA,gBAAA,OAAA,CAAA,GAAA,kEAAA,KAAA,IAAA;;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAnCA,C","sourcesContent":["<template>\n    <view class=\"bg-gray cu-page\">\n        <status v-if=\"list.length<1 \" text=\"暂无充值记录\"></status>\n        <view class=\"cu-list margin  menu-avatar\" >\n            <view class=\"cu-item margin-top-sm radius-xxxl\" v-for=\"(item,index) in  list\" :key=\"index\">\n                <view class=\"cu-avatar bg-white round md\"\n                      style=\"background-image:url('https://lft-ad.oss-cn-hangzhou.aliyuncs.com/eleme/png/bg-recharge-record.png');\">\n                </view>\n                <view class=\"content\">\n                    <view class=\"text-black\">{{item.order_id}}</view>\n                    <view class=\"text-gray text-sm flex\">\n                        <text class=\"text-cut\">\n                            <text class=\" margin-right-sm\">{{item.name}}</text>\n<!--                            <text class=\"tex-xxxs\">{{item.more}}</text>-->\n                        </text>\n                    </view>\n                </view>\n\n                <view class=\"action margin-right  padding-right\">\n                                        <view class=\"text-orange text-sm   \">粮票+{{item.coin}}</view>\n                    <view class=\"cu-tag text-sm round bg-white sm \">{{item.pay_time | DateFormat}}</view>\n                </view>\n            </view>\n        </view>\n\n    </view>\n</template>\n\n<script>\n    import {getRechargeRecord} from \"../../api/orders\";\n    import Status from \"../component/status\";\n    import {dateFormat} from \"../../utils/utils\";\n\n    export default {\n        name: \"rechargeRecord\",\n        components: {Status},\n        data() {\n            return {\n                list: [],\n                page:1\n            }\n        },\n        onPullDownRefresh(){\n            console.log(`调试:触发下拉` );\n            this.page =1;\n            this.loadData();\n        },\n        onReachBottom(){\n            console.log(`调试:触发触底` );\n            this.loadData()\n        },\n        async onLoad(options) {\n            console.log(`调试:充值记录页收到参数`, options);\n            const {cardno} = options;\n            let rechargeRecord = await getRechargeRecord();\n            this.list = rechargeRecord.list;\n            this.list =  this.list.map(item=>{\n                item.pay_time = dateFormat(item.pay_time,'yyyy-MM-dd hh:mm');\n                console.log(`调试:`,item.pay_time)\n                return item;\n            })\n            console.log(`调试:充值记录查询结果`, this.list)\n        },\n        filters:{\n            DateFormat(val){\n                return dateFormat(new Date(val),\"yyyy-MM-dd hh:mm\")\n            },\n        },\n        methods:{\n            async loadData({page=1}={}){\n                uni.showLoading({title:'加载中...'});\n                let  data = await  getRechargeRecord({page:this.page});\n                uni.hideLoading();\n                if(data.list.length){\n                    if(this.page == 1){\n                        this.list = data.list;\n                    }else{\n                        this.list = [...this.list,...data.list];\n\n                    }\n                    this.page = this.page + 1;\n\n\n\n                }else{\n                    uni.showToast({\n                        title:\"已经到底了\",\n                        icon:'none'\n                    })\n                }\n\n                console.log(`调试:使用记录查询结果`, this.list)\n            }\n        }\n    }\n</script>\n\n<style scoped scoped>\n    .cu-list.menu-avatar>.cu-item .content{\n        left:110rpx;\n    }\n    .cu-list.menu-avatar>.cu-item .action {\n        width:150rpx;\n    }\n</style>\n"],"sourceRoot":"src/pages/rechargeRecord"}]}